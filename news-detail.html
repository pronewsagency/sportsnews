<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>تفاصيل الخبر</title>
  <style>
    body { font-family: "Tajawal", sans-serif; background:#fafafa; padding:20px; }
    .news-detail { max-width:800px; margin:auto; background:#fff; padding:20px;
                   border-radius:10px; box-shadow:0 1px 6px rgba(0,0,0,0.1); }
    h1 { font-size:22px; margin-bottom:12px; }
    .meta { color:#666; font-size:14px; margin-bottom:10px; }
    img { max-width:100%; border-radius:8px; margin-bottom:15px; }
    p { line-height:1.7; font-size:16px; color:#333; }
    a.back { display:inline-block; margin-top:15px; color:#0066cc; text-decoration:none; }
  </style>
</head>
<body>
  <div id="content">⏳ جاري تحميل الخبر...</div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const newsUrl = params.get("link");
    const proxy = "https://api.allorigins.win/get?url=" + encodeURIComponent(newsUrl);

    fetch(proxy)
      .then(res => res.json())
      .then(data => {
        const doc = new DOMParser().parseFromString(data.contents, "text/html");

        const title = doc.querySelector("h1")?.textContent.trim() || "بدون عنوان";
        const date = doc.querySelector(".dates-sec span")?.textContent.trim() || "";
        const imgSrc = doc.querySelector(".details-img img")?.getAttribute("src") || "";
        const paragraphs = [...doc.querySelectorAll(".description p")].map(p => p.textContent.trim());

        document.getElementById("content").innerHTML = `
          <div class="news-detail">
            <h1>${title}</h1>
            <div class="meta">🗓 ${date}</div>
            <img src="${imgSrc}" alt="${title}">
            ${paragraphs.map(p => `<p>${p}</p>`).join("")}
            <a href="index.html" class="back">⬅️ رجوع للأخبار</a>
          </div>
        `;
      })
      .catch(err => {
        document.getElementById("content").innerHTML = "❌ خطأ أثناء جلب تفاصيل الخبر: " + err;
      });
  </script>
</body>
</html>
